<!DOCTYPE html>
<html lang='en'>
<head>
  <meta charset='utf-8'>
  <meta name='viewport' content='width=device-width, initial-scale=1'>
  <title>GroLinx REI - Safe Minimal Build</title>
  <style>
    :root{
      --primary:#133463; --accent:#0ea5e9; --bg:#f1f5f9; --text:#0f172a; --muted:#64748b; --panel:#ffffff; --bar:#e2e8f0;
      --success:#059669; --warn:#f59e0b; --danger:#dc2626; --border:#e5e7eb;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0; font-family:system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif; background:var(--bg); color:var(--text)}
    #brandheader{background:var(--primary); color:#fff; padding:18px 14px}
    #brandheader .row{display:flex; align-items:center; gap:10px}
    #brandheader .logo{width:40px; height:40px; border-radius:8px; background:rgba(255,255,255,0.18); display:flex; align-items:center; justify-content:center; font-weight:800}

    #tabsbar{background:var(--bar); padding:10px 12px; display:flex; gap:8px; flex-wrap:wrap}
    .pill{padding:8px 12px; border-radius:999px; border:1px solid var(--border); background:#fff; cursor:pointer}
    .pill.active{background:var(--primary); color:#fff; border-color:var(--primary)}

    main{padding:12px}
    .card{background:var(--panel); border:1px solid var(--border); border-radius:10px; padding:12px}
    .row{display:flex; gap:8px; align-items:center}
    .grid-2{display:grid; grid-template-columns:1fr 1fr; gap:12px}
    .muted{color:var(--muted)}
    .btn{padding:8px 12px; border-radius:8px; border:1px solid var(--primary); color:#fff; background:var(--primary); cursor:pointer}
    .btn-ghost{padding:8px 12px; border-radius:8px; border:1px solid var(--border); background:#fff; cursor:pointer}

    footer{padding:16px; text-align:center; color:var(--muted)}

    /* error overlay */
    #overlay{position:fixed; left:12px; right:12px; top:80px; background:#fff1f2; border:2px solid #ef4444; color:#7f1d1d; padding:12px; z-index:9999; border-radius:8px; box-shadow:0 6px 30px rgba(0,0,0,0.12); display:none}
    #overlay pre{white-space:pre-wrap; word-break:break-word}
  </style>
</head>
<body>
  <div id='brandheader'>
    <div class='row'>
      <div class='logo'>G</div>
      <div>
        <div style='font-weight:900; font-size:18px'>GroLinx Real Estate Investment Platform</div>
        <div class='muted' style='font-size:13px'>v1.3.7-safe</div>
      </div>
    </div>
  </div>

  <div id='tabsbar'></div>
  <main>
    <div id='app'></div>
  </main>

  <div id='overlay'>
    <div style='font-weight:800; margin-bottom:6px'>Error</div>
    <pre id='overlayMsg'></pre>
  </div>

  <footer>GroLinx Safe Minimal Build â€¢ v1.3.7-safe</footer>

  <script>
    (function(){
      'use strict';
      // Basic state
      var state = {
        active: 'dashboard',
        modules: [
          { id: 'dashboard', label: 'Investor Dashboard' },
          { id: 'finder', label: 'Investment Finder' },
          { id: 'dealanalyzer', label: 'Deal Analyzer' }
        ]
      };

      function showError(e){
        try{
          var msg = (e && e.stack) ? e.stack : String(e);
          var box = document.getElementById('overlay');
          var pre = document.getElementById('overlayMsg');
          pre.textContent = msg;
          box.style.display = 'block';
          console.error('GroLinx error:', e);
        }catch(_){ /* ignore */ }
      }

      function clear(node){
        while(node.firstChild){ node.removeChild(node.firstChild); }
      }

      function h(tag, attrs, children){
        var el = document.createElement(tag);
        if(attrs){
          for(var k in attrs){
            if(k === 'class') el.className = attrs[k];
            else if(k === 'style') el.setAttribute('style', attrs[k]);
            else el.setAttribute(k, attrs[k]);
          }
        }
        if(children){
          for(var i=0;i<children.length;i++){
            var c = children[i];
            if(typeof c === 'string'){ el.appendChild(document.createTextNode(c)); }
            else if(c) { el.appendChild(c); }
          }
        }
        return el;
      }

      function renderTabs(){
        var bar = document.getElementById('tabsbar');
        clear(bar);
        for(var i=0;i<state.modules.length;i++){
          (function(m){
            var btn = h('button', { class: 'pill' + (state.active === m.id ? ' active' : '') }, [m.label]);
            btn.addEventListener('click', function(){ state.active = m.id; render(); });
            bar.appendChild(btn);
          })(state.modules[i]);
        }
      }

      function sectionPlaceholder(title, desc){
        return h('div', { class: 'card' }, [
          h('div', { style: 'font-weight:800; margin-bottom:6px' }, [title]),
          h('div', { class: 'muted' }, [desc])
        ]);
      }

      function renderDashboard(root){
        root.appendChild(sectionPlaceholder('Investor Dashboard', 'Profile, commitments, and investor list will appear here.'));
        var row = h('div', { class: 'row', style: 'margin-top:10px' }, [
          h('button', { class: 'btn' }, ['Primary Action']),
          h('button', { class: 'btn-ghost' }, ['Secondary'])
        ]);
        root.appendChild(h('div', { class: 'card', style: 'margin-top:10px' }, [row]));
      }

      function renderFinder(root){
        root.appendChild(sectionPlaceholder('Investment Finder', 'Search and filters for deals. Results will show below.'));
        var res = h('div', { class: 'card', style: 'margin-top:10px' }, [
          h('div', { class: 'muted' }, ['Example result list will render here.'])
        ]);
        root.appendChild(res);
      }

      function renderAnalyzer(root){
        root.appendChild(sectionPlaceholder('Deal Analyzer', 'Enter deal inputs, see metrics and T12.'));
        var metrics = h('div', { class: 'grid-2', style: 'margin-top:10px' }, [
          h('div', { class: 'card' }, [h('div', null, ['Metric 1']), h('div', { class: 'muted' }, ['Value'])]),
          h('div', { class: 'card' }, [h('div', null, ['Metric 2']), h('div', { class: 'muted' }, ['Value'])])
        ]);
        root.appendChild(metrics);
      }

      function render(){
        try{
          renderTabs();
          var app = document.getElementById('app');
          clear(app);
          var mount = h('div', null, []);
          if(state.active === 'dashboard') renderDashboard(mount);
          if(state.active === 'finder') renderFinder(mount);
          if(state.active === 'dealanalyzer') renderAnalyzer(mount);
          app.appendChild(mount);
          console.log('GroLinx v1.3.7-safe render ok, active =', state.active);
        }catch(e){ showError(e); }
      }

      // Startup
      try{
        console.log('GroLinx v1.3.7-safe starting', new Date().toISOString());
        render();
      }catch(e){ showError(e); }
    })();
  </script>
</body>
</html>
